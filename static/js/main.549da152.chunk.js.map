{"version":3,"sources":["cacluator/util.js","cacluator/Home.js","index.js"],"names":["calculateResult","inputList","targetValue","calculateType","resultList","depth","length","tempPath","currentMaxOrMin","checkMax","value","i","list","forEach","p","index","push","total","every","v","sort","toString","checkMin","search","Title","Typography","Text","Home","useState","inputListForPrint","setInputListForPrint","targetValueForPrint","setTargetValueForPrint","resultListForPrint","setResultListForPrint","useCallback","style","margin","title","display","name","wrapperCol","span","onFinish","values","restInput","Object","filter","parseFloat","map","k","console","log","JSON","stringify","autoComplete","padding","width","level","Item","initialValue","Group","buttonStyle","Button","formList","initForm","type","htmlType","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mLAAO,SAASA,EAAgBC,EAAWC,EAAaC,GACtD,IAAIC,EAAa,GACbC,EAAQJ,EAAUK,OAClBC,EAAW,GACXC,EAAkB,EAiBhBC,EAAW,WAEf,IADA,IAAIC,EAAQ,EACHC,EAAI,EAAGA,EAAIN,EAAOM,IACL,IAAhBJ,EAASI,KACXD,GAAST,EAAUU,IAIvB,GAAID,GAASR,EAAa,CACxB,IAAIU,EAAO,GACXL,EAASM,SAAQ,SAACC,EAAGC,GACT,IAAND,GACFF,EAAKI,KAAKf,EAAUc,OAGpBL,EAAQF,GACVJ,EAAa,CAAC,CAAEa,MAAOP,EAAOE,SAC9BJ,EAAkBE,GACTA,IAAUF,GACfJ,EAAWc,OAAM,SAACC,GAAD,OAAOA,EAAEP,KAAKQ,OAAOC,aAAeT,EAAKQ,OAAOC,eACnEjB,EAAWY,KAAK,CAAEC,MAAOP,EAAOE,WAMlCU,EAAW,WAEf,IADA,IAAIZ,EAAQ,EACHC,EAAI,EAAGA,EAAIN,EAAOM,IACL,IAAhBJ,EAASI,KACXD,GAAST,EAAUU,IAIvB,GAAID,GAASR,EAAa,CACxB,IAAIU,EAAO,GACXL,EAASM,SAAQ,SAACC,EAAGC,GACT,IAAND,GACFF,EAAKI,KAAKf,EAAUc,QAInBP,GAAmBE,EAAQF,GAC9BJ,EAAa,CAAC,CAAEa,MAAOP,EAAOE,SAC9BJ,EAAkBE,GACTA,IAAUF,GACfJ,EAAWc,OAAM,SAACC,GAAD,OAAOA,EAAEP,KAAKQ,OAAOC,aAAeT,EAAKQ,OAAOC,eACnEjB,EAAWY,KAAK,CAAEC,MAAOP,EAAOE,WAOxC,OArEe,SAATW,EAAUZ,GACVA,GAAKN,EACe,eAAlBF,EACFM,IAC2B,eAAlBN,GACTmB,KAGFf,EAASI,GAAK,EACdY,EAAOZ,EAAI,GACXJ,EAASI,GAAK,EACdY,EAAOZ,EAAI,IAyDfY,CAAO,GACAnB,E,iECvEDoB,EAAgBC,IAAhBD,MAAOE,EAASD,IAATC,KA2HAC,EAzHF,WAAO,IAAD,EAEiCC,mBAAS,IAF1C,mBAEVC,EAFU,KAESC,EAFT,OAGqCF,mBAAS,GAH9C,mBAGVG,EAHU,KAGWC,EAHX,OAImCJ,mBAAS,IAJ5C,mBAIVK,EAJU,KAIUC,EAJV,KAOEC,uBAAY,SAAClC,EAAWC,EAAaC,GACtD,OAAOH,EAAgBC,EAAWC,EAAaC,KAC9C,IA4CH,OACE,qCACE,cAACuB,EAAD,CACEU,MAAO,CAAEC,OAAQ,IADnB,SAGE,cAAC,IAAD,CAASC,MAAM,6YAAf,2DAIF,sBAAKF,MAAO,CAAEG,QAAS,QAAvB,UACE,eAAC,IAAD,CACEC,KAAK,QACLC,WAAY,CACVC,KAAM,IAERC,SAzDO,SAACC,GAAY,IAClB1C,EAA6C0C,EAA7C1C,YAAaC,EAAgCyC,EAAhCzC,cAAkB0C,EADd,YAC4BD,EAD5B,iCAEnB3C,EAAY6C,OAAOF,OAAOC,GAAWE,QAAO,SAAA5B,GAAC,QAAMA,GAAK6B,WAAW7B,IAAM,KAAG8B,KAAI,SAAAC,GAAC,OAAIF,WAAWE,MAEtG,GAAIjD,EAAUK,OAAQ,CACpB,IAAMF,EAAaJ,EAAgBC,EAAWC,EAAaC,GAE3DgD,QAAQC,IAAIhD,GACZ+C,QAAQC,IAAIjD,GAEZgD,QAAQC,IAAI,iCAAUnD,GACtBkD,QAAQC,IAAI,iCAAUlD,EAAc,UAEpCE,EAAWS,SAAQ,SAAAM,GACjBgC,QAAQC,IAAI,gEAAgBC,KAAKC,UAAUnC,EAAEP,MAAQ,iBAASO,EAAEF,MAAQ,aAG1Ea,EAAqB7B,GACrB+B,EAAuB9B,GACvBgC,EAAsB9B,QAEtB0B,EAAqB,IACrBE,EAAuB,GACvBE,EAAsB,KAmClBqB,aAAa,MACbnB,MAAO,CAAEoB,QAAS,KAAMC,MAAO,OAPjC,UASE,cAACjC,EAAD,CAAOkC,MAAO,EAAd,sCAGA,cAAC,IAAKC,KAAN,CACEC,aAAa,aACbpB,KAAK,gBAFP,SAIE,eAAC,IAAMqB,MAAP,CAAaC,YAAY,QAAzB,UACE,cAAC,IAAMC,OAAP,CAAcrD,MAAM,aAApB,wDACA,cAAC,IAAMqD,OAAP,CAAcrD,MAAM,aAApB,6DAGJ,cAACc,EAAD,CAAOkC,MAAO,EAAd,sCAGA,cAAC,IAAKC,KAAN,CAAWnB,KAAK,cAAcJ,MAAO,CAAEG,QAAS,eAAgBkB,MAAO,OAAvE,SACE,cAAC,IAAD,MAEF,cAACjC,EAAD,CAAOkC,MAAO,EAAd,kDApDS,WAEf,IADA,IAAMM,EAAW,GACRrD,EAAI,EAAGA,EAAI,GAAIA,GAAK,EAC3BqD,EAAShD,KACP,cAAC,IAAK2C,KAAN,CACEnB,KAAM,SAAW7B,EACjByB,MAAO,CAAEG,QAAS,eAAgBkB,MAAO,OAF3C,SAIE,cAAC,IAAD,OAIN,OAAOO,EA2CAC,GACD,cAAC,IAAKN,KAAN,UACE,cAAC,IAAD,CAAQO,KAAK,UAAUC,SAAS,SAAhC,gCAKe,OAAlBlC,QAAkB,IAAlBA,OAAA,EAAAA,EAAoB3B,QACnB,sBAAK8B,MAAO,CAAEoB,QAAS,KAAMC,MAAO,OAApC,UACE,cAACjC,EAAD,CAAOkC,MAAO,EAAd,4CACA,cAAClC,EAAD,CAAOkC,MAAO,EAAd,SAAkBL,KAAKC,UAAUzB,EAAmB,KAAM,KAC1D,uBACA,cAACL,EAAD,CAAOkC,MAAO,EAAd,4CACA,eAAClC,EAAD,CAAOkC,MAAO,EAAd,UAAkB3B,EAAlB,aACA,uBACA,cAACP,EAAD,CAAOkC,MAAO,EAAd,gFACCzB,EAAmBgB,KAAI,SAAC9B,GAAD,OACrB,eAACK,EAAD,CAAOkC,MAAO,EAAd,UAAkBL,KAAKC,UAAUnC,EAAEP,KAAM,KAAM,GAA/C,gCAA8EO,EAAEF,MAAhF,mBAIH,Y,OCnHZmD,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.549da152.chunk.js","sourcesContent":["export function calculateResult(inputList, targetValue, calculateType) {\r\n  let resultList = [];\r\n  let depth = inputList.length;\r\n  let tempPath = [];\r\n  let currentMaxOrMin = 0;\r\n\r\n  const search = (i) => { // 递归深度\r\n    if (i >= depth) {\r\n      if (calculateType === 'noMoreThan') {\r\n        checkMax();\r\n      } else if (calculateType === 'noLessThan') {\r\n        checkMin();\r\n      }\r\n    } else {\r\n      tempPath[i] = 0;\r\n      search(i + 1);\r\n      tempPath[i] = 1;\r\n      search(i + 1);\r\n    }\r\n  };\r\n\r\n  const checkMax = () => {\r\n    let value = 0;\r\n    for (let i = 0; i < depth; i++) {\r\n      if (tempPath[i] === 1) {\r\n        value += inputList[i];\r\n      }\r\n    }\r\n    // 不高于（交通）\r\n    if (value <= targetValue) {\r\n      let list = [];\r\n      tempPath.forEach((p, index) => {\r\n        if (p === 1) {\r\n          list.push(inputList[index]);\r\n        }\r\n      });\r\n      if (value > currentMaxOrMin) {\r\n        resultList = [{ total: value, list }];\r\n        currentMaxOrMin = value;\r\n      } else if (value === currentMaxOrMin) {\r\n        if (resultList.every((v) => v.list.sort().toString() !== list.sort().toString())) {\r\n          resultList.push({ total: value, list });\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const checkMin = () => {\r\n    let value = 0;\r\n    for (let i = 0; i < depth; i++) {\r\n      if (tempPath[i] === 1) {\r\n        value += inputList[i];\r\n      }\r\n    }\r\n    // 不低于（租房）\r\n    if (value >= targetValue) {\r\n      let list = [];\r\n      tempPath.forEach((p, index) => {\r\n        if (p === 1) {\r\n          list.push(inputList[index]);\r\n        }\r\n      });\r\n\r\n      if (!currentMaxOrMin || value < currentMaxOrMin) {\r\n        resultList = [{ total: value, list }];\r\n        currentMaxOrMin = value;\r\n      } else if (value === currentMaxOrMin) {\r\n        if (resultList.every((v) => v.list.sort().toString() !== list.sort().toString())) {\r\n          resultList.push({ total: value, list });\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  search(0);\r\n  return resultList;\r\n}\r\n\r\n","import { useCallback, useState } from 'react';\r\nimport { calculateResult } from './util';\r\nimport { Button, Form, Input, Radio, Tooltip, Typography } from 'antd';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst Home = () => {\r\n\r\n  const [inputListForPrint, setInputListForPrint] = useState([]);\r\n  const [targetValueForPrint, setTargetValueForPrint] = useState(0);\r\n  const [resultListForPrint, setResultListForPrint] = useState([]);\r\n\r\n\r\n  const calculator = useCallback((inputList, targetValue, calculateType) => {\r\n    return calculateResult(inputList, targetValue, calculateType);\r\n  }, []);\r\n\r\n  const submit = (values) => {\r\n    const { targetValue, calculateType, ...restInput } = values;\r\n    const inputList = Object.values(restInput).filter(v => !!v && parseFloat(v) >= 0).map(k => parseFloat(k));\r\n\r\n    if (inputList.length) {\r\n      const resultList = calculateResult(inputList, targetValue, calculateType);\r\n\r\n      console.log(resultList);\r\n      console.log(calculateType);\r\n\r\n      console.log('发票金额：' + inputList);\r\n      console.log('目标额度：' + targetValue + '元');\r\n\r\n      resultList.forEach(v => {\r\n        console.log('最接近目标值的组合为 ' + JSON.stringify(v.list) + ' ,合计' + v.total + '元');\r\n      });\r\n\r\n      setInputListForPrint(inputList);\r\n      setTargetValueForPrint(targetValue);\r\n      setResultListForPrint(resultList);\r\n    } else {\r\n      setInputListForPrint([]);\r\n      setTargetValueForPrint(0);\r\n      setResultListForPrint([]);\r\n    }\r\n  };\r\n\r\n  const initForm = () => {\r\n    const formList = [];\r\n    for (let i = 0; i < 21; i += 1) {\r\n      formList.push(\r\n        <Form.Item\r\n          name={'value_' + i}\r\n          style={{ display: 'inline-block', width: '33%' }}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n      );\r\n    }\r\n    return formList;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Text\r\n        style={{ margin: 10 }}\r\n      >\r\n        <Tooltip title=\"1207更新：1.修复未完全筛掉相同输出结果的问题，增加对输入负数校验处理；2.调整输出界面换行，微调标题样式；3.增加计算“不低于”目标额度的功能\">\r\n          E票M - 发票助手 V 0.9.1\r\n        </Tooltip>\r\n      </Text>\r\n      <div style={{ display: 'flex' }}>\r\n        <Form\r\n          name=\"basic\"\r\n          wrapperCol={{\r\n            span: 18,\r\n          }}\r\n          onFinish={submit}\r\n          autoComplete=\"off\"\r\n          style={{ padding: '4%', width: '50%' }}\r\n        >\r\n          <Title level={4}>\r\n            计算方式\r\n          </Title>\r\n          <Form.Item\r\n            initialValue=\"noMoreThan\"\r\n            name=\"calculateType\"\r\n          >\r\n            <Radio.Group buttonStyle=\"solid\">\r\n              <Radio.Button value=\"noMoreThan\">不超过（交通）</Radio.Button>\r\n              <Radio.Button value=\"noLessThan\">不低于（其他）</Radio.Button>\r\n            </Radio.Group>\r\n          </Form.Item>\r\n          <Title level={4}>\r\n            目标额度\r\n          </Title>\r\n          <Form.Item name=\"targetValue\" style={{ display: 'inline-block', width: '60%' }}>\r\n            <Input />\r\n          </Form.Item>\r\n          <Title level={4}>\r\n            输入发票金额\r\n          </Title>\r\n          {initForm()}\r\n          <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              提交\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n        {resultListForPrint?.length ? (\r\n          <div style={{ padding: '4%', width: '50%' }}>\r\n            <Title level={4}>发票金额：</Title>\r\n            <Title level={5}>{JSON.stringify(inputListForPrint, null, 2)}</Title>\r\n            <br />\r\n            <Title level={4}>目标额度：</Title>\r\n            <Title level={5}>{targetValueForPrint} 元</Title>\r\n            <br />\r\n            <Title level={4}>最接近目标值的组合为：</Title>\r\n            {resultListForPrint.map((v) =>\r\n              (<Title level={5}>{JSON.stringify(v.list, null, 2)}&nbsp;&nbsp;&nbsp;&nbsp;合计 {v.total} 元</Title>)\r\n            )}\r\n\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\n\r\nexport default Home;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Home from './cacluator/Home';\r\nimport 'antd/dist/antd.css'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Home />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}